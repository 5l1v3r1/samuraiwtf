- name: create zap folder
  file:
    path: /opt/samurai/zap
    state: directory

- name: Download and unzip ZAP
  unarchive:
    src: https://github.com/zaproxy/zaproxy/releases/download/2.6.0/ZAP_2.6.0_Crossplatform.zip
    dest: /opt/samurai/zap
    remote_src: yes

- name: Create zap menu item
  copy:
    dest: /etc/samurai.d/applications/zap.desktop
    content: |
      #!/usr/bin/env xdg-open
      [Desktop Entry]
      Version=1.0
      Type=Application
      Terminal=false
      Exec=/usr/bin/owasp-zap
      Name=ZAP
      Icon=/opt/samurai/icons/zap.png
      Categories=samuraiwtf
      Comment=OWASP Interception proxy
      Name[en_US]=ZAP
    mode: 0744
  become: yes
